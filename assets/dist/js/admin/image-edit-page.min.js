/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./assets/src/js/admin/image-edit-page.js":
/*!************************************************!*\
  !*** ./assets/src/js/admin/image-edit-page.js ***!
  \************************************************/
/***/ (() => {

eval("(function ($) {\n  \"use strict\";\n\n  var prefix = 'gpls-wmpdf-watermark-pdf';\n  var prefixUnderscored = 'gpls_wmpdf_watermark_pdf';\n  var localize_vars = window[prefixUnderscored + '_localize_vars'];\n  $(document).on('ready', function (e) {\n    $('.' + localize_vars['classes_prefix'] + '-msgs-toast').toast({\n      autohide: false\n    });\n    $(document).on('click', '.' + localize_vars['classes_prefix'] + '-msgs-toast .close-toast', function (e) {\n      var $this = $(e.target);\n      var toast = $this.parents('.toast').toast('hide');\n    });\n\n    // Auto hide the image cache busting url param.\n    hideCacheBustingURLParam();\n\n    // Restore Backup.\n    $(document).on('click', '.' + localize_vars['classes_prefix'] + '-watermarks-options .restore-backup', function (e) {\n      e.preventDefault();\n      if (confirm(localize_vars.labels.restore_backup_prompt)) {\n        var backupOptionsBox = $('.' + localize_vars['classes_prefix'] + '-watermarks-options');\n        backupOptionsBox.find('.action-btn').prop('disabled', true);\n        backupOptionsBox.find('.loading').removeClass('d-none');\n        var $this = $(e.target);\n        var attachmentID = $this.data('id');\n        restoreBackup(attachmentID);\n      }\n    });\n\n    // Delete Backup.\n    $(document).on('click', '.' + localize_vars['classes_prefix'] + '-watermarks-options .delete-backup', function (e) {\n      e.preventDefault();\n      if (confirm(localize_vars.labels.delete_backup_prompt)) {\n        var backupOptionsBox = $('.' + localize_vars['classes_prefix'] + '-watermarks-options');\n        backupOptionsBox.find('.action-btn').prop('disabled', true);\n        backupOptionsBox.find('.loading').removeClass('d-none');\n        var $this = $(e.target);\n        var attachmentID = $this.data('id');\n        deleteBackup(attachmentID);\n      }\n    });\n  });\n  function deleteBackup(attachmentID) {\n    var backupOptionsBox = $('.' + localize_vars['classes_prefix'] + '-watermarks-options');\n    var data = {\n      action: localize_vars.deleteOriginalImageBackupAction,\n      nonce: localize_vars.nonce,\n      attachmentID: attachmentID\n    };\n    $.ajax({\n      method: 'POST',\n      url: localize_vars.ajaxUrl,\n      data: data,\n      success: function success(resp) {\n        var status = resp['data']['result'] && 'success' === resp['data']['result'] ? 'bg-primary' : 'bg-danger';\n        if (resp['data']['msg']) {\n          showToast(resp['data']['msg'], status);\n        }\n        if (resp['data']['errors']) {\n          showToast(resp['data']['errors'], 'bg-danger', true);\n        }\n        if (resp['data']['result'] && 'success' === resp['data']['result']) {\n          backupOptionsBox.find('.backup-options').remove();\n        }\n      },\n      error: function error(err) {\n        var _err$data;\n        // console.log( 'error restoring backup', err );\n        if (err !== null && err !== void 0 && (_err$data = err.data) !== null && _err$data !== void 0 && _err$data.message) {\n          showToast(err.data.message, 'bg-danger');\n        }\n      },\n      complete: function complete() {\n        backupOptionsBox.find('.action-btn').prop('disabled', false);\n        backupOptionsBox.find('.loading').addClass('d-none');\n      }\n    });\n  }\n  function restoreBackup(attachmentID) {\n    var backupOptionsBox = $('.' + localize_vars['classes_prefix'] + '-watermarks-options');\n    var checkedSizes = [];\n    $('.' + localize_vars['classes_prefix'] + '-restore-backup-image-size:checked').each(function (index, element) {\n      var $this = $(element);\n      checkedSizes.push($this.val());\n    });\n    var data = {\n      action: localize_vars.restoreOriginalImageBackupAction,\n      nonce: localize_vars.nonce,\n      attachmentID: attachmentID,\n      sizes: checkedSizes\n    };\n    $.ajax({\n      method: 'POST',\n      url: localize_vars.ajaxUrl,\n      data: data,\n      success: function success(resp) {\n        var status = resp['data']['result'] && 'success' === resp['data']['result'] ? 'bg-primary' : 'bg-danger';\n        if (resp['data']['errors']) {\n          showToast(resp['data']['errors'], 'bg-danger', true);\n        }\n        if (resp['data']['msg']) {\n          showToast(resp['data']['msg'], status);\n        }\n      },\n      error: function error(err) {\n        var _err$data2;\n        // console.log( 'error restoring backup', err );\n        if (err !== null && err !== void 0 && (_err$data2 = err.data) !== null && _err$data2 !== void 0 && _err$data2.message) {\n          showToast(err.data.message, 'bg-danger');\n        }\n      },\n      complete: function complete() {\n        backupOptionsBox.find('.action-btn').prop('disabled', false);\n        backupOptionsBox.find('.loading').addClass('d-none');\n      }\n    });\n  }\n  function showToast(toastMsg) {\n    var bgColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'bg-primary';\n    var is_multiple = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var toast = $('.' + localize_vars['classes_prefix'] + '-msgs-toast');\n    toast.removeClass(function (index, className) {\n      return (className.match(/(^|\\s)bg-\\S+/g) || []).join(' ');\n    });\n    var html = '';\n    if (!is_multiple) {\n      html = '<p>' + toastMsg + '</p>';\n    } else {\n      html = '<ul class=\"toast-notice-list\">';\n      toastMsg.forEach(function (msg) {\n        html += '<li class=\"notice-item\"><p>' + msg + '</p></li>';\n      });\n      html += '</ul>';\n    }\n    toast.addClass(bgColor).find('.toast-body').html(html);\n    toast.toast('show');\n  }\n  function hideCacheBustingURLParam() {\n    var currentURL = new URL(window.location.href);\n    if (currentURL.searchParams.get(localize_vars.classes_prefix + '-force-pdf-refresh')) {\n      currentURL.searchParams[\"delete\"](localize_vars.classes_prefix + '-force-pdf-refresh');\n      window.history.replaceState(null, null, currentURL.href);\n    }\n  }\n})(jQuery);\n\n//# sourceURL=webpack://gpls-sli-wp-screenleap-integration/./assets/src/js/admin/image-edit-page.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./assets/src/js/admin/image-edit-page.js"]();
/******/ 	
/******/ })()
;